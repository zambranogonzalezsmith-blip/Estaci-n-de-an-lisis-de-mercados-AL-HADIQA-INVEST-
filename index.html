<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alhadiqainvest | HQ Terminal</title>
    
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">
    <link rel="stylesheet" href="style.css">
    
    <script src="chart-lib.js"></script>
</head>
<body class="menu-collapsed"> <div id="lib-error" style="display:none; position:fixed; top:0; left:0; width:100%; background:red; color:white; text-align:center; z-index:9999; padding:10px; font-weight:bold;">
        ‚ö†Ô∏è ERROR: No se carg√≥ el motor de gr√°ficos (chart-lib.js).
    </div>

    <button id="menu-toggle" onclick="toggleMenu()" title="Abrir Men√∫">‚ò∞</button>

    <div class="dashboard-wrapper">
        <nav class="sidebar" id="sidebar">
            <div class="brand">
                <img src="icon.jpg" alt="Logo" class="main-logo" onerror="this.style.display='none'">
                <span>ALHADIQAINVEST</span>
            </div>

            <div class="menu-section">
                <small class="menu-title">NAVEGACI√ìN</small>
                <ul class="nav-links">
                    <li class="active"><a href="index.html">üìà Terminal Pro</a></li>
                    <li><a href="#" id="nav-forex-smc">üí± Forex SMC Pro</a></li>
                    <li><a href="https://www.investing.com/economic-calendar/" target="_blank">üìÖ Calendario</a></li>
                </ul>
            </div>

            <div class="menu-section status-box">
                <small class="menu-title">SISTEMA</small>
                <div class="diag-box">
                    <button id="btn-diagnostico" onclick="ejecutarDiagnostico()">üîç Diagnosticar</button>
                </div>
                <div class="status-indicator">
                    <div class="dot green"></div>
                    <span>Online</span>
                </div>
            </div>
            
            <button class="close-sidebar" onclick="toggleMenu()">Cerrar Panel √ó</button>
        </nav>

        <main class="main-content">
            <header id="status-banner" class="neutral">
                <h1 id="signal-text">CONECTANDO...</h1>
            </header>

            <div class="content-grid">
                <section class="chart-area" id="main-chart"></section>

                <aside class="info-panel">
                    
                    <div class="card kira-panel" id="kira-terminal">
                        <div class="kira-header">
                            <span class="label">üéØ KIRA 1.0 SNIPER</span>
                            <div id="session-indicator" class="session-badge">CERRADO</div>
                        </div>
                        <div class="kira-stats">
                            <div class="stat-item"><small>SPREAD</small><span id="kira-spread">--</span></div>
                            <div class="stat-item"><small>LOTES</small><strong id="suggested-lot">0.01</strong></div>
                        </div>
                        <div id="kira-signal-box" class="kira-wait">
                            <span id="kira-action">ESPERANDO CONFLUENCIA...</span>
                        </div>
                        <div class="risk-calculator">
                            <input type="number" id="kira-balance" value="1000" placeholder="Balance USD" onchange="calcularLotaje()">
                        </div>
                    </div>

                    <div class="card selector-card">
                        <span class="label">TEMPORALIDAD</span>
                        <div class="timeframe-grid">
                            <button class="tf-btn" onclick="cambiarTF('1m')">1M</button>
                            <button class="tf-btn" onclick="cambiarTF('5m')">5M</button>
                            <button class="tf-btn active" onclick="cambiarTF('15m')">15M</button>
                            <button class="tf-btn" onclick="cambiarTF('1h')">1H</button>
                            <button class="tf-btn" onclick="cambiarTF('1d')">1D</button>
                        </div>
                    </div>

                    <div class="card selector-card">
                        <span class="label">MERCADO</span>
                        <select id="asset-selector">
                            <optgroup label="Criptomonedas">
                                <option value="BTC" selected>Bitcoin (BTC)</option>
                                <option value="ETH">Ethereum (ETH)</option>
                            </optgroup>
                            <optgroup label="Forex">
                                <option value="EURUSD">EUR/USD</option>
                                <option value="GBPUSD">GBP/USD</option>
                                <option value="USDJPY">USD/JPY</option>
                            </optgroup>
                            <optgroup label="Commodities">
                                <option value="GOLD">Oro (XAU/USD)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="card price-card">
                        <span class="label" id="asset-name">BITCOIN</span>
                        <span class="value price" id="current-price">$0.00</span>
                    </div>

                    <div class="card" id="smc-info-card" style="border-left: 4px solid #58a6ff; display: none;">
                        <span class="label">ESTRUCTURA SMC</span>
                        <span class="value" id="smc-status">Analizando...</span>
                    </div>

                    <details class="card settings-details">
                        <summary>‚öôÔ∏è CONFIGURACI√ìN T√âCNICA</summary>
                        <div class="setting-group">
                            <label>EMA Fast:</label>
                            <input type="number" id="input-ema-fast" value="20" onchange="actualizarParametros()">
                        </div>
                        <div class="setting-group">
                            <label>EMA Mid:</label>
                            <input type="number" id="input-ema-mid" value="50" onchange="actualizarParametros()">
                        </div>
                        <div class="setting-group">
                            <label>EMA Slow:</label>
                            <input type="number" id="input-ema-slow" value="80" onchange="actualizarParametros()">
                        </div>
                        <button class="btn-save" onclick="cargarActivo()">APLICAR</button>
                    </details>
                </aside>
            </div>
        </main>
    </div>

    <script>
        function toggleMenu() {
            document.body.classList.toggle('menu-collapsed');
            // Forzar redimensionado de gr√°fica al abrir/cerrar men√∫
            setTimeout(() => { 
                if(chart) window.dispatchEvent(new Event('resize')); 
            }, 300);
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
