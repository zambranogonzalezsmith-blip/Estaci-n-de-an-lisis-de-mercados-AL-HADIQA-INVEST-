<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALHADIQA | Institutional Terminal</title>
    
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body class="menu-collapsed">
    
    <nav class="top-bar">
        <button class="nav-trigger" onclick="toggleMenu()">
            <span class="root-label">TERMINAL@ALHADIQA:~$</span>
            <span class="status-pill">ACTIVE</span>
        </button>
        <div class="server-time" id="digital-clock">00:00:00 UTC</div>
    </nav>

    <div class="dashboard-wrapper">
        <aside class="sidebar" id="sidebar">
            <div class="brand-container">
                <img src="icon.jpg" alt="Logo" class="main-logo">
                <div class="brand-info">
                    <span class="brand-name">ALHADIQA</span>
                    <span class="brand-tag">QUANTITATIVE DESK</span>
                </div>
            </div>

            <div class="nav-group">
                <label>OPERATIVA</label>
                <a href="#" class="nav-item active">üìà Market Terminal</a>
                <a href="#" onclick="abrirPasarela()" class="nav-item">üí≥ Kira Pay Secure</a>
                <a href="https://www.investing.com/economic-calendar/" target="_blank" class="nav-item">üìÖ Economic Feed</a>
            </div>

            <div class="nav-group">
                <label>ENGINE_TOOLS</label>
                <a href="#" onclick="ejecutarDiagnostico()" class="nav-item">üîç Network Latency</a>
                <a href="#" class="nav-item">üìú Signal Logs</a>
            </div>

            <div class="sidebar-footer">
                <button class="btn-collapse" onclick="toggleMenu()">COLLAPSE_SYSTEM_CORE</button>
            </div>
        </aside>

        <main class="viewport">
            <div class="ticker-wrap">
                <div class="ticker-item" id="signal-text">SYSTEM_READY: SCANNING_LIQUIDITY_POOLS...</div>
            </div>

            <div class="workspace-grid">
                <section class="chart-container">
                    <div id="main-chart" class="chart-canvas"></div>
                </section>

                <aside class="data-rail">
                    
                    <div class="glass-card engine-status">
                        <div class="card-head">
                            <span class="engine-tag">KIRA_ALGO_v3.2</span>
                            <span class="session-dot" title="Live Session"></span>
                        </div>
                        
                        <div class="metrics-row">
                            <div class="metric">
                                <label>SPREAD</label>
                                <span id="kira-spread" class="val">0.00</span>
                            </div>
                            <div class="metric">
                                <label>SNIPER_LOT</label>
                                <span id="suggested-lot" class="val-gold">0.01</span>
                            </div>
                        </div>

                        <div id="kira-signal-box" class="signal-idle">
                            <span id="kira-action">IDLE_SCANNING</span>
                        </div>

                        <div class="input-group">
                            <label>EQUITY_BASE (USD)</label>
                            <input type="number" id="kira-balance" value="1000" onchange="calcularLotaje()">
                        </div>
                    </div>

                    <div class="glass-card controls">
                        <div class="tf-selector">
                            <button onclick="cambiarTF('1m')">1M</button>
                            <button class="active" onclick="cambiarTF('15m')">15M</button>
                            <button onclick="cambiarTF('1h')">1H</button>
                        </div>
                        <select id="asset-selector" class="custom-select" onchange="cargarActivo()">
                            <optgroup label="DIGITAL_ASSETS">
                                <option value="BTC" selected>BTC/USDT (Spot)</option>
                                <option value="ETH">ETH/USDT (Spot)</option>
                            </optgroup>
                            <optgroup label="FIAT_PAIRS">
                                <option value="EURUSD">EUR/USD (Institutional)</option>
                                <option value="GBPUSD">GBP/USD (Institutional)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="glass-card telemetry">
                        <div class="price-stack">
                            <span id="asset-name" class="asset-id">BITCOIN</span>
                            <span id="current-price" class="live-price">$0.00</span>
                        </div>
                        <div class="gauge-wrap">
                            <div class="gauge-label">RSI_14: <span id="rsi-value">--</span></div>
                            <div class="gauge-track"><div id="rsi-fill" class="gauge-bar"></div></div>
                        </div>
                    </div>

                </aside>
            </div>
        </main>
    </div>

    <div id="crypto-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>KIRA_PAY_GATEWAY</h3>
                <button class="close-btn" onclick="cerrarPasarela()">√ó</button>
            </div>
            <div class="qr-frame">
                <img id="qr-deposit" src="" alt="Secure QR">
            </div>
            <div class="address-strip" onclick="copyWallet()">
                <span id="wallet-addr">0x738...</span>
                <small>COPY_HASH</small>
            </div>
            <button class="btn-primary" onclick="conectarMetaMask()">EXECUTE_WEB3_LINK</button>
        </div>
    </div>

    <script>
        // Reloj Digital
        setInterval(() => {
            document.getElementById('digital-clock').innerText = new Date().toISOString().split('T')[1].split('.')[0] + ' UTC';
        }, 1000);

        function toggleMenu() {
            document.body.classList.toggle('menu-collapsed');
            setTimeout(() => { if(window.chart) window.dispatchEvent(new Event('resize')); }, 250);
        }

        function abrirPasarela() {
            document.getElementById('crypto-modal').style.display = 'flex';
            if(window.KIRA_PAY) KIRA_PAY.abrir();
        }

        function cerrarPasarela() { document.getElementById('crypto-modal').style.display = 'none'; }

        function copyWallet() {
            const addr = document.getElementById('wallet-addr').innerText;
            navigator.clipboard.writeText(addr);
            alert("HASH COPIADO AL PORTAPAPELES SEGURIZADO");
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
