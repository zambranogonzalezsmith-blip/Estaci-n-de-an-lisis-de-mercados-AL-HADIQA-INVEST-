<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALHADIQA INVEST | TERMINAL v3.1</title>
    
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body class="menu-collapsed">
    
    <button id="menu-toggle" onclick="toggleMenu()">
        <span class="icon">‚ò∞</span> <small>ROOT@ALHADIQA</small>
    </button>

    <div class="dashboard-wrapper">
        <nav class="sidebar" id="sidebar">
            <div class="brand">
                <img src="icon.jpg" alt="Logo" class="main-logo" onerror="this.style.border='1px solid var(--accent)'">
                <div class="brand-text">
                    <span class="name">ALHADIQA</span>
                    <span class="sub">INSTITUTIONAL HQ</span>
                </div>
            </div>

            <div class="menu-section">
                <small class="menu-title">-- OPERATIVA_CORE</small>
                <ul class="nav-links">
                    <li class="active"><a href="#">üìà TERMINAL_LIVE</a></li>
                    <li><a href="#" onclick="abrirPasarela()">üíé KIRA_PAY_SECURE</a></li>
                    <li><a href="https://www.investing.com/economic-calendar/" target="_blank">üìÖ CALENDARIO_ECON</a></li>
                </ul>
            </div>

            <div class="menu-section">
                <small class="menu-title">-- KIRA_TOOLS</small>
                <ul class="nav-links">
                    <li><a href="#" onclick="ejecutarDiagnostico()">üîç TEST_LATENCIA</a></li>
                    <li><a href="#">üìú LOG_ALERTAS</a></li>
                </ul>
            </div>

            <div class="sidebar-footer">
                <div class="status-indicator">
                    <div class="dot green"></div>
                    <span>SYSTEM: ONLINE</span>
                </div>
                <button class="close-sidebar" onclick="toggleMenu()">[ EXIT_PANEL ]</button>
            </div>
        </nav>

        <main class="main-content">
            <header id="status-banner" class="neutral">
                <div class="signal-badge" id="signal-text">SCANNING_MARKET...</div>
            </header>

            <div class="content-grid">
                <section class="chart-area" id="main-chart" style="width: 100%; height: 100%; background: #000;"></section>

                <aside class="info-panel">
                    
                    <div class="card kira-panel">
                        <div class="kira-header">
                            <span class="tag-gold">KIRA_ALGO_1.0</span>
                            <div id="session-indicator" class="session-badge">LONDRES_ACTIVE</div>
                        </div>
                        
                        <div class="kira-data-grid">
                            <div class="data-box">
                                <small>SPREAD</small>
                                <span id="kira-spread" class="highlight">0.0 PIPS</span>
                            </div>
                            <div class="data-box">
                                <small>LOT_SNIPER</small>
                                <strong id="suggested-lot" class="highlight" style="color:var(--gold)">0.01</strong>
                            </div>
                        </div>

                        <div id="kira-signal-box" class="kira-wait">
                            <span id="kira-action">> INICIALIZANDO ESC√ÅNER...</span>
                        </div>

                        <div class="risk-calculator">
                            <label class="label">ACCOUNT_BALANCE (USD)</label>
                            <input type="number" id="kira-balance" value="1000" onchange="calcularLotaje()">
                        </div>
                    </div>

                    <div class="card selector-card">
                        <label class="label">TIMEFRAME</label>
                        <div class="timeframe-grid">
                            <button class="tf-btn" onclick="cambiarTF('1m')">1M</button>
                            <button class="tf-btn active" onclick="cambiarTF('15m')">15M</button>
                            <button class="tf-btn" onclick="cambiarTF('1h')">1H</button>
                        </div>

                        <label class="label" style="margin-top:15px; display:block;">SELECT_ASSET</label>
                        <select id="asset-selector" class="dark-select" onchange="cargarActivo()">
                            <optgroup label="CRIPTO_SMC">
                                <option value="BTC" selected>BTC / USDT</option>
                                <option value="ETH">ETH / USDT</option>
                            </optgroup>
                            <optgroup label="FOREX_INSTITUTIONAL">
                                <option value="EURUSD">EUR / USD</option>
                                <option value="GBPUSD">GBP / USD</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="card price-display">
                        <div class="price-info">
                            <span id="asset-name" class="asset-title">BITCOIN</span>
                            <span id="current-price" class="price-value">$0.00</span>
                        </div>
                        <div class="rsi-bar">
                            <small>RSI_LEVEL: <span id="rsi-value">--</span></small>
                            <div class="rsi-track"><div id="rsi-fill" style="width: 50%"></div></div>
                        </div>
                    </div>

                </aside>
            </div>
        </main>
    </div>

    <div id="crypto-modal">
        <div class="payment-card">
            <h3 style="color:var(--accent); margin:0;">KIRA_PAY_v1.0</h3>
            <p style="font-size:10px; color:var(--text-dim);">NETWORK: BEP20 (BINANCE SMART CHAIN)</p>
            
            <div class="qr-container">
                <img id="qr-deposit" src="" alt="QR_CODE">
            </div>
            
            <div class="wallet-address-box" id="wallet-addr" onclick="copyWallet()">
                0x738... (CLICK PARA COPIAR)
            </div>

            <button class="btn-metamask" onclick="conectarMetaMask()">CONNECT_WEB3_WALLET</button>
            <br>
            <button onclick="cerrarPasarela()" style="background:none; border:none; color:var(--danger); cursor:pointer; margin-top:15px; font-family:'JetBrains Mono'; font-size:10px;">[ ABORT_TRANSACTION ]</button>
        </div>
    </div>

    <script>
        function toggleMenu() {
            document.body.classList.toggle('menu-collapsed');
            setTimeout(() => { if(window.chart) window.dispatchEvent(new Event('resize')); }, 200);
        }

        function abrirPasarela() {
            document.getElementById('crypto-modal').style.display = 'flex';
            if(window.KIRA_PAY) KIRA_PAY.abrir();
        }

        function cerrarPasarela() {
            document.getElementById('crypto-modal').style.display = 'none';
        }

        function copyWallet() {
            const addr = document.getElementById('wallet-addr').innerText;
            navigator.clipboard.writeText(addr);
            alert("DIRECCI√ìN COPIADA AL PORTAPAPELES");
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
